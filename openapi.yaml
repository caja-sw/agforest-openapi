openapi: 3.1.0
info:
  title: AGForest API Spec
  version: 3.0.0
paths:
  /categories:
    get:
      summary: 카테고리 목록 조회
      responses:
        "200":
          description: 카테고리 목록
          content:
            application/json:
              schema:
                type: object
                required: [categories]
                properties:
                  categories:
                    type: array
                    items:
                      type: object
                      required: [id, name]
                      properties:
                        id:
                          type: integer
                          format: int32
                          description: 카테고리 ID
                        name:
                          type: string
                          description: 카테고리 이름
              example:
                categories:
                  - id: 1
                    name: 자유 게시판
                  - id: 2
                    name: 문의사항
  /categories/{id}/posts:
    get:
      summary: 게시글 목록 조회
      parameters:
        - name: id
          in: path
          required: true
          description: 조회할 카테고리의 ID
          schema:
            type: integer
            format: int32
          example: 1
        - name: offset
          in: query
          required: true
          description: 게시글 목록의 시작 위치
          schema:
            type: integer
            format: int64
            minimum: 0
          example: 0
        - name: limit
          in: query
          required: true
          description: 게시글 목록의 최대 개수
          schema:
            type: integer
            format: int64
            minimum: 1
            maximum: 100
          example: 20
      responses:
        "200":
          description: 카테고리 게시글 목록
          content:
            application/json:
              schema:
                type: object
                required: [totalPostCount, posts]
                properties:
                  totalPostCount:
                    type: integer
                    format: int64
                    description: 카테고리에 속한 게시글 수
                  posts:
                    type: array
                    description: 카테고리에 속한 게시글 목록
                    items:
                      type: object
                      required: [id, author, category, title, createdAt]
                      properties:
                        id:
                          type: integer
                          format: int32
                          description: 게시글 ID
                        author:
                          type: object
                          required: [name, hash]
                          description: 게시글 작성자 정보
                          properties:
                            name:
                              type: string
                              description: 작성자 이름
                            hash:
                              type: string
                              description: 작성자 해시
                        category:
                          type: object
                          required: [id, name]
                          description: 게시글이 속한 카테고리 정보
                          properties:
                            id:
                              type: integer
                              format: int32
                              description: 카테고리 ID
                            name:
                              type: string
                              description: 카테고리 이름
                        title:
                          type: string
                          description: 게시글 제목
                        createdAt:
                          type: string
                          format: date-time
                          description: 게시글 작성 시간
              example:
                totalPostCount: 3
                posts:
                  - id: 1
                    author:
                      name: 익명
                      hash: deb31d415ad39db3
                    category:
                      id: 1
                      name: 자유 게시판
                    title: 게시물 1
                    createdAt: 2025-08-13T14:23:40.926Z
                  - id: 2
                    author:
                      name: 익명
                      hash: 7e6daed71421bf35
                    category:
                      id: 1
                      name: 자유 게시판
                    title: 게시물 2
                    createdAt: 2025-08-13T14:23:40.926Z
                  - id: 3
                    author:
                      name: 익명
                      hash: f91c5c2dd839cd5e
                    category:
                      id: 1
                      name: 자유 게시판
                    title: 게시물 3
                    createdAt: 2025-08-13T14:23:40.926Z
        "404":
          description: 카테고리를 찾을 수 없음
    post:
      summary: 게시글 생성
      parameters:
        - name: id
          in: path
          required: true
          description: 게시글의 카테고리 ID
          schema:
            type: integer
            format: int32
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [author, password, title, content]
              properties:
                author:
                  type: string
                  description: 게시글 작성자 이름
                password:
                  type: string
                  description: 게시글 비밀번호
                title:
                  type: string
                  description: 게시글 제목
                content:
                  type: string
                  description: 게시글 내용
            example:
              author: 익명
              password: password123
              title: 게시글 1
              content: 안녕하세요
      responses:
        "201":
          description: 게시글이 성공적으로 생성됨
          content:
            application/json:
              schema:
                type: object
                required: [id]
                properties:
                  id:
                    type: integer
                    format: int32
                    description: 생성된 게시글의 ID
              example:
                id: 1
        "404":
          description: 카테고리를 찾을 수 없음
        "422":
          description: 요청 데이터가 유효하지 않아 게시글 생성에 실패함
          content:
            application/json:
              schema:
                type: object
                required: [messages]
                properties:
                  messages:
                    type: object
                    properties:
                      author:
                        type: string
                        description: author 제약 조건 메세지
                      password:
                        type: string
                        description: password 제약 조건 메세지
                      title:
                        type: string
                        description: title 제약 조건 메세지
                      content:
                        type: string
                        description: content 제약 조건 메세지
              example:
                messages:
                  password: 비밀번호는 4글자 이상이어야 합니다
                  title: 제목은 100글자보다 길 수 없습니다
  /posts/{id}:
    get:
      summary: 게시글 조회
      parameters:
        - name: id
          in: path
          required: true
          description: 조회할 게시글의 ID
          schema:
            type: integer
            format: int32
          example: 1
      responses:
        "200":
          description: 게시글 정보
          content:
            application/json:
              schema:
                type: object
                required: [id, author, category, title, content, createdAt]
                properties:
                  id:
                    type: integer
                    format: int32
                    description: 게시글 ID
                  author:
                    type: object
                    required: [name, hash]
                    description: 게시글 작성자 정보
                    properties:
                      name:
                        type: string
                        description: 작성자 이름
                      hash:
                        type: string
                        description: 작성자 해시
                  category:
                    type: object
                    required: [id, name]
                    description: 게시글이 속한 카테고리 정보
                    properties:
                      id:
                        type: integer
                        format: int32
                        description: 카테고리 ID
                      name:
                        type: string
                        description: 카테고리 이름
                  title:
                    type: string
                    description: 게시글 제목
                  content:
                    type: string
                    description: 게시글 내용
                  createdAt:
                    type: string
                    format: date-time
                    description: 게시글 작성 시간
              example:
                id: 1
                author:
                  name: 익명
                  hash: deb31d415ad39db3
                category:
                  id: 1
                  name: 자유 게시판
                title: 게시물 1
                content: 안녕하세요
                createdAt: 2025-08-13T14:23:40.926Z
        "404":
          description: 게시글을 찾을 수 없음
    delete:
      summary: 게시글 삭제
      parameters:
        - name: id
          in: path
          required: true
          description: 삭제할 게시글의 ID
          schema:
            type: integer
            format: int32
          example: 1
        - name: Password
          in: header
          required: true
          description: 게시글 비밀번호
          schema:
            type: string
          example: password123
      responses:
        "204":
          description: 게시글이 성공적으로 삭제됨
        "403":
          description: 비밀번호가 일치하지 않음
        "404":
          description: 게시글을 찾을 수 없음
  /posts/{id}/comments:
    get:
      summary: 댓글 목록 조회
      parameters:
        - name: id
          in: path
          required: true
          description: 댓글을 조회할 게시글의 ID
          schema:
            type: integer
            format: int32
          example: 1
      responses:
        "200":
          description: 댓글 목록
          content:
            application/json:
              schema:
                type: object
                required: [comments]
                properties:
                  comments:
                    type: array
                    items:
                      type: object
                      required: [id, author, content, createdAt]
                      properties:
                        id:
                          type: integer
                          format: int32
                          description: 댓글 ID
                        author:
                          type: object
                          required: [name, hash]
                          description: 댓글 작성자 정보
                          properties:
                            name:
                              type: string
                              description: 작성자 이름
                            hash:
                              type: string
                              description: 작성자 해시
                        content:
                          type: string
                          description: 댓글 내용
                        createdAt:
                          type: string
                          format: date-time
                          description: 댓글 작성 시간
              example:
                comments:
                  - id: 1
                    author:
                      name: 익명
                      hash: 7e6daed71421bf35
                    content: 안녕하세요
                    createdAt: 2025-08-13T14:23:40.926Z
                  - id: 2
                    author:
                      name: 익명
                      hash: f91c5c2dd839cd5e
                    content: 안녕하세요
                    createdAt: 2025-08-13T14:23:40.926Z
        "404":
          description: 게시글을 찾을 수 없음
    post:
      summary: 댓글 생성
      parameters:
        - name: id
          in: path
          required: true
          description: 댓글을 작성할 게시글의 ID
          schema:
            type: integer
            format: int32
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [author, password, content]
              properties:
                author:
                  type: string
                  description: 댓글 작성자 이름
                password:
                  type: string
                  description: 댓글 비밀번호
                content:
                  type: string
                  description: 댓글 내용
            example:
              author: 익명
              password: password123
              content: 안녕하세요
      responses:
        "201":
          description: 댓글이 성공적으로 작성됨
        "404":
          description: 게시글을 찾을 수 없음
        "422":
          description: 요청 데이터가 유효하지 않아 댓글 생성에 실패함
          content:
            application/json:
              schema:
                type: object
                required: [messages]
                properties:
                  messages:
                    type: object
                    properties:
                      author:
                        type: string
                        description: author 제약 조건 메세지
                      password:
                        type: string
                        description: password 제약 조건 메세지
                      content:
                        type: string
                        description: content 제약 조건 메세지
              example:
                messages:
                  password: 비밀번호는 4글자 이상이어야 합니다
                  content: 댓글은 1000글자보다 길 수 없습니다
  /comments/{id}:
    delete:
      summary: 댓글 삭제
      parameters:
        - name: id
          in: path
          required: true
          description: 삭제할 댓글의 ID
          schema:
            type: integer
            format: int32
          example: 1
        - name: Password
          in: header
          required: true
          description: 댓글 비밀번호
          schema:
            type: string
          example: password123
      responses:
        "204":
          description: 댓글이 성공적으로 삭제됨
        "403":
          description: 비밀번호가 일치하지 않음
        "404":
          description: 댓글을 찾을 수 없음
